<section class="rocco-reviews" id="reviews-{{ section.id }}">
  <div class="reviews-container">
    {% if section.settings.show_header %}
      <div class="section-header">
        <h2 class="section-title">{{ section.settings.section_title }}</h2>
        {% if section.settings.section_subtitle != blank %}
          <p class="section-subtitle">{{ section.settings.section_subtitle }}</p>
        {% endif %}
      </div>
    {% endif %}

    {% if section.settings.show_rating_overview %}
      <div class="rating-overview">
        <div class="average-rating">
          <div class="rating-number">{{ section.settings.average_rating }}</div>
          <div class="stars">
            {% assign rating_floor = section.settings.average_rating | split: '.' | first | plus: 0 %}
            {% for i in (1..5) %}
              {% if i <= rating_floor %}
                ‚òÖ
              {% else %}
                ‚òÜ
              {% endif %}
            {% endfor %}
          </div>
          <div class="total-reviews">{{ section.settings.total_reviews_text }}</div>
        </div>
      </div>
    {% endif %}

    <div class="reviews-grid">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'review' %}
            <div class="review-card" {{ block.shopify_attributes }}>
              <div class="review-header">
                <div class="reviewer-info">
                  <div class="reviewer-avatar">
                    {% if block.settings.reviewer_image != blank %}
                      <img
                        src="{{ block.settings.reviewer_image | img_url: '100x100', crop: 'center' }}"
                        alt="{{ block.settings.reviewer_name }}"
                        loading="lazy"
                      >
                    {% else %}
                      {{ block.settings.reviewer_initials }}
                    {% endif %}
                  </div>
                  <div class="reviewer-details">
                    <div class="review-stars">
                      {% for i in (1..5) %}
                        {% if i <= block.settings.rating %}
                          ‚òÖ
                        {% else %}
                          ‚òÜ
                        {% endif %}
                      {% endfor %}
                    </div>
                    <h4>{{ block.settings.reviewer_name }}</h4>
                    <div class="review-date">{{ block.settings.review_date }}</div>
                  </div>
                </div>
              </div>
              <div class="review-content">
                {% if block.settings.review_title != blank %}
                  <h3 class="review-title">{{ block.settings.review_title }}</h3>
                {% endif %}
                <p class="review-text">{{ block.settings.review_text }}</p>
              </div>
              {% if block.settings.product_name != blank %}
                <div class="review-product">üõç {{ block.settings.product_name }}</div>
              {% endif %}
              {% if block.settings.show_verified %}
                <div class="verified-badge">‚úì {{ section.settings.verified_text }}</div>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>

    {% if section.settings.show_cta %}
      <div class="review-cta">
        <h3>{{ section.settings.cta_title }}</h3>
        {% if section.settings.cta_text != blank %}
          <p>{{ section.settings.cta_text }}</p>
        {% endif %}
        <a href="{{ section.settings.cta_link }}" class="btn-write-review">{{ section.settings.cta_button_text }}</a>
      </div>
    {% endif %}
  </div>
</section>

<style>
  #reviews-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    padding: {{ section.settings.section_padding_top }}px 0 {{ section.settings.section_padding_bottom }}px;
    font-family: var(--font-h1--family);
  }

  #reviews-{{ section.id }} .reviews-container {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding-inline: var(--util-page-margin-offset);
  }

  #reviews-{{ section.id }} .section-header {
    margin-bottom: 24px;
    text-align: left;
  }

  #reviews-{{ section.id }} .section-title {
    font-size: {{ section.settings.title_font_size }}px;
    font-weight: 700;
    letter-spacing: normal;
    margin-bottom: 15px;
    color: {{ section.settings.title_color }};
    text-align: left;
  }

  #reviews-{{ section.id }} .section-subtitle {
    font-size: {{ section.settings.subtitle_font_size }}px;
    color: {{ section.settings.subtitle_color }};
    font-weight: 300;
    max-width: 600px;
    text-align: left;
  }

  #reviews-{{ section.id }} .rating-overview {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 40px;
    margin-bottom: 40px;
    padding: 30px;
    background: {{ section.settings.card_background }};
    border-radius: 2px;
  }

  #reviews-{{ section.id }} .average-rating {
    text-align: center;
  }

  #reviews-{{ section.id }} .rating-number {
    font-size: 3rem;
    font-weight: 300;
    color: {{ section.settings.text_color }};
    margin-bottom: 8px;
  }

  #reviews-{{ section.id }} .stars {
    display: inline-flex;
    gap: 4px;
    font-size: 20px;
    color: {{ section.settings.star_color }};
    margin-bottom: 5px;
  }

  #reviews-{{ section.id }} .total-reviews {
    font-size: 0.9rem;
    color: {{ section.settings.secondary_text_color }};
    font-weight: 300;
  }

  #reviews-{{ section.id }} .reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
  }

  #reviews-{{ section.id }} .review-card {
    background: {{ section.settings.card_background }};
    padding: 30px;
    border-radius: 2px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  #reviews-{{ section.id }} .review-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  }

  #reviews-{{ section.id }} .review-header {
    margin-bottom: 15px;
    position: relative;
  }

  #reviews-{{ section.id }} .reviewer-info {
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  #reviews-{{ section.id }} .reviewer-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: #e8e8e8;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 500;
    color: #666;
    font-size: 1rem;
    overflow: hidden;
    flex-shrink: 0;
  }

  #reviews-{{ section.id }} .reviewer-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  #reviews-{{ section.id }} .reviewer-details {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  #reviews-{{ section.id }} .reviewer-details h4 {
    font-size: 0.95rem;
    font-weight: 500;
    color: {{ section.settings.text_color }};
    margin: 0;
  }

  #reviews-{{ section.id }} .review-date {
    font-size: 0.8rem;
    color: {{ section.settings.secondary_text_color }};
    font-weight: 300;
  }

  #reviews-{{ section.id }} .review-stars {
    display: flex;
    gap: 2px;
    font-size: 14px;
    color: {{ section.settings.star_color }};
  }

  @media (min-width: 769px) {
    #reviews-{{ section.id }} .review-stars {
      position: absolute;
      top: 0;
      right: 0;
    }
  }

  #reviews-{{ section.id }} .review-content {
    margin-bottom: 15px;
  }

  #reviews-{{ section.id }} .review-title {
    font-size: 1rem;
    font-weight: 500;
    color: {{ section.settings.text_color }};
    margin-bottom: 10px;
  }

  #reviews-{{ section.id }} .review-text {
    font-size: 0.9rem;
    line-height: 1.6;
    color: {{ section.settings.body_text_color }};
    font-weight: 300;
  }

  #reviews-{{ section.id }} .review-product {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.8rem;
    color: {{ section.settings.secondary_text_color }};
    padding: 6px 12px;
    background: {{ section.settings.background_color }};
    border-radius: 2px;
    font-weight: 300;
  }

  #reviews-{{ section.id }} .verified-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    color: {{ section.settings.verified_color }};
    margin-top: 12px;
    font-weight: 400;
  }

  #reviews-{{ section.id }} .review-cta {
    text-align: center;
    padding: 50px 30px;
    background: {{ section.settings.card_background }};
    border-radius: 2px;
  }

  #reviews-{{ section.id }} .review-cta h3 {
    font-size: 1.6rem;
    font-weight: 300;
    letter-spacing: 1px;
    margin-bottom: 12px;
    color: {{ section.settings.text_color }};
  }

  #reviews-{{ section.id }} .review-cta p {
    font-size: 0.95rem;
    color: {{ section.settings.body_text_color }};
    margin-bottom: 25px;
    font-weight: 300;
  }

  #reviews-{{ section.id }} .btn-write-review {
    display: inline-block;
    padding: 14px 45px;
    background: {{ section.settings.button_background }};
    color: {{ section.settings.button_text_color }};
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 400;
    letter-spacing: 1px;
    text-transform: uppercase;
    transition: all 0.3s ease;
    border: 2px solid {{ section.settings.button_background }};
  }

  #reviews-{{ section.id }} .btn-write-review:hover {
    background: {{ section.settings.button_hover_background }};
    color: {{ section.settings.button_hover_text }};
  }
    @media (max-width: 1440px) {
    #reviews-{{ section.id }} .reviews-container {
      padding: 0 40px;
    }

  @media (max-width: 768px) {
    #reviews-{{ section.id }} .reviews-container {
      padding: 0 20px;
    }

    #reviews-{{ section.id }} .section-title {
      font-size: 1.6rem;

    }

    #reviews-{{ section.id }} .reviews-grid {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      gap: 15px;
      margin-left: -20px;
      margin-right: -20px;
      margin-bottom: 40px;
      padding-inline-start: 20px;
      scroll-padding-inline-start: 20px;
      padding-inline-end: 20px;
    }

    #reviews-{{ section.id }} .reviews-grid::-webkit-scrollbar {
      display: none;
    }

    #reviews-{{ section.id }} .review-card {
      flex: 0 0 85%;
      min-width: 85%;
      scroll-snap-align: start;
      padding: 25px;
    }

    #reviews-{{ section.id }} .rating-overview {
      flex-direction: column;
      gap: 15px;
      padding: 25px 20px;
    }

    #reviews-{{ section.id }} .review-cta {
      padding: 35px 20px;
    }
  }
</style>

{% schema %}
{
  "name": "Reviews Section",
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1600,
      "step": 20,
      "unit": "px",
      "label": "Container Width",
      "default": 1440
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Section Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Section Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "checkbox",
      "id": "show_header",
      "label": "Show Section Header",
      "default": true
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Customer Reviews"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title Font Size",
      "default": 36
    },
    {
      "type": "text",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Discover what our customers say about their ROCCO experience"
    },
    {
      "type": "range",
      "id": "subtitle_font_size",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subtitle Font Size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Rating Overview"
    },
    {
      "type": "checkbox",
      "id": "show_rating_overview",
      "label": "Show Rating Overview",
      "default": true
    },
    {
      "type": "text",
      "id": "average_rating",
      "label": "Average Rating",
      "default": "4.9"
    },
    {
      "type": "text",
      "id": "total_reviews_text",
      "label": "Total Reviews Text",
      "default": "Based on 247 reviews"
    },
    {
      "type": "text",
      "id": "verified_text",
      "label": "Verified Badge Text",
      "default": "Verified Purchase"
    },
    {
      "type": "header",
      "content": "CTA Section"
    },
    {
      "type": "checkbox",
      "id": "show_cta",
      "label": "Show CTA Section",
      "default": true
    },
    {
      "type": "text",
      "id": "cta_title",
      "label": "CTA Title",
      "default": "Share Your Experience"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text",
      "default": "Have you already shopped with us? We would love to hear from you!"
    },
    {
      "type": "text",
      "id": "cta_button_text",
      "label": "Button Text",
      "default": "Write a Review"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle Color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "body_text_color",
      "label": "Body Text Color",
      "default": "#555555"
    },
    {
      "type": "color",
      "id": "secondary_text_color",
      "label": "Secondary Text Color",
      "default": "#999999"
    },
    {
      "type": "color",
      "id": "star_color",
      "label": "Star Color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "verified_color",
      "label": "Verified Badge Color",
      "default": "#4CAF50"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button Background",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button Hover Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_text",
      "label": "Button Hover Text Color",
      "default": "#1a1a1a"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "reviewer_image",
          "label": "Reviewer Avatar Image",
          "info": "Optional. If not provided, initials will be used"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
          "default": "Customer"
        },
        {
          "type": "text",
          "id": "reviewer_initials",
          "label": "Reviewer Initials",
          "default": "C",
          "info": "2-3 letters for avatar (used if no image uploaded)"
        },
        {
          "type": "text",
          "id": "review_date",
          "label": "Review Date",
          "default": "1 week ago"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Star Rating",
          "default": 5
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Review Title",
          "default": "Great Product!"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "This product exceeded my expectations. The quality is outstanding and it fits perfectly."
        },
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "info": "Leave blank to hide"
        },
        {
          "type": "checkbox",
          "id": "show_verified",
          "label": "Show Verified Badge",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews Section",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Michael R.",
            "reviewer_initials": "MR",
            "review_date": "2 weeks ago",
            "rating": 5,
            "review_title": "Exceptional Quality",
            "review_text": "The Black Shirt Ripped is an absolute highlight in my wardrobe. The fabric is premium and the fit is perfect. You can immediately tell that every detail has been carefully considered.",
            "product_name": "Black shirt ripped",
            "show_verified": true
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Sarah L.",
            "reviewer_initials": "SL",
            "review_date": "1 month ago",
            "rating": 5,
            "review_title": "Perfect Summer Look",
            "review_text": "The Burgundy Rose Shirt is simply beautiful. The color is even better than in the pictures and the craftsmanship is top-notch. I've already received multiple compliments.",
            "product_name": "Shirt burgundy rose",
            "show_verified": true
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "David K.",
            "reviewer_initials": "DK",
            "review_date": "3 weeks ago",
            "rating": 5,
            "review_title": "My New Favorite Set",
            "review_text": "The Beige Set Short is perfect for warm days. Comfortable, stylish and versatile. The quality definitely justifies the price. Will certainly order more from ROCCO.",
            "product_name": "Beige set short",
            "show_verified": true
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Emma W.",
            "reviewer_initials": "EW",
            "review_date": "5 days ago",
            "rating": 5,
            "review_title": "Elegance Redefined",
            "review_text": "ROCCO exceeded my expectations. The Black Set Long is elegant yet super comfortable. Perfect for transitioning from day to night. Lightning fast delivery!",
            "product_name": "Black set long",
            "show_verified": true
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "James P.",
            "reviewer_initials": "JP",
            "review_date": "2 months ago",
            "rating": 5,
            "review_title": "Highly Recommend!",
            "review_text": "After a long search, I finally found the perfect brand. The Black Vest Ripped is a statement piece. The quality is exceptional and customer service was very helpful with sizing questions.",
            "product_name": "Black vest ripped",
            "show_verified": true
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Sophie M.",
            "reviewer_initials": "SM",
            "review_date": "1 week ago",
            "rating": 5,
            "review_title": "Timeless Elegance",
            "review_text": "I'm absolutely thrilled with the quality and design. The clothing feels luxurious and looks even better than expected. ROCCO is definitely my new go-to brand for minimalist elegance.",
            "product_name": "Black shirt short",
            "show_verified": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
