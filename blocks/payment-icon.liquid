{% liquid
  assign block_settings = block.settings
%}

<li
  class="payment-icons__item payment-icons__item--custom"
  {{ block.shopify_attributes }}
>
  {%- if block_settings.image != blank -%}
    {%- liquid
      assign icon_size_double = settings.payment_icon_size | times: 2
    -%}
    <div class="image-wrapper">
      {{
        block_settings.image
        | image_url: width: icon_size_double, height: icon_size_double
        | image_tag: alt: block_settings.image.alt
        | default: block_settings.label, class: 'payment-icons__custom-image'
      }}
    </div>

  {%- else -%}
    {%- if request.design_mode -%}
      <div class="payment-icons__placeholder">
        <span>Upload icon</span>
      </div>
    {%- endif -%}
  {%- endif -%}
</li>

<style>
  .payment-icons__item--custom {
    display: flex;
    align-items: center;
  }

  .payment-icons__custom-image {
    display: block;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .image-wrapper {
    height: {{ settings.payment_icon_size }}px;
    width: {{ settings.payment_icon_size }}px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .payment-icons__placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--padding-xs) var(--padding-sm);
    border: 1px dashed var(--color-border);
    border-radius: 4px;
    font-size: var(--font-size--xs);
    color: var(--color-foreground-secondary);
    opacity: 0.6;
  }
</style>

{% schema %}
{
  "name": "Payment icon",
  "tag": null,
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Payment icon image",
      "info": "Upload your payment method logo (e.g., Visa, Mastercard, PayPal)"
    },
    {
      "type": "text",
      "id": "label",
      "label": "Icon label",
      "info": "e.g., 'Visa', 'Mastercard', 'PayPal' - used for accessibility",
      "default": "Payment method"
    }
  ],
  "presets": [
    {
      "name": "Payment icon",
      "category": "t:categories.footer"
    }
  ]
}
{% endschema %}
