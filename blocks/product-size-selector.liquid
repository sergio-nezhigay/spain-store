{%- liquid
  assign block_settings = block.settings
  assign property_name = 'properties[Size]'
  assign product_form_id = 'BuyButtons-ProductForm-section.id' | replace: 'section.id', section.id
-%}

<div class="product-size-selector spacing-style" style="{% render 'spacing-style', settings: block_settings %}">
  <p class="product-size-selector__heading">Select a size</p>
  <div class="product-size-selector__options">
    {% assign sizes = 'S,M,L,XL' | split: ',' %}
    {% for size in sizes %}
      <div class="product-size-selector__option">
        <input
          type="radio"
          id="size-{{ size }}-{{ section.id }}"
          name="{{ property_name }}"
          value="{{ size }}"
          form="{{ product_form_id }}"
          class="visually-hidden"
          {% if forloop.first %}checked{% endif %}
        >
        <label for="size-{{ size }}-{{ section.id }}" class="product-size-selector__label">
          {{ size }}
        </label>
      </div>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .product-size-selector__heading {
    font-size: 18px;
    margin-bottom: 1rem;
  }
  .product-size-selector__options {
    display: flex;
    gap: 0; /* Removing gap to match the image where borders might overlap or be close */
  }
  .product-size-selector__option {
    flex: 1;
  }
  .product-size-selector__label {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    padding: 14px 16px;
    border: 1px solid black;
    cursor: pointer;
    text-align: center;
    font-size: 14px;
    line-height: 22px;
    transition: all 0.2s ease;
    background: white;
    color: black;
  }

  /* Handle border doubling */
  .product-size-selector__option:not(:first-child) .product-size-selector__label {
    border-left: none;
  }

  input[type="radio"]:checked + .product-size-selector__label {
    background-color: transparent; /* Based on image it looks like white bg but maybe bold border? Or maybe just selected style. */
    /* Actually the image shows white buttons. One has an envelope. */
    /* Let's assume standard selected state is black bg white text for now, or maybe just a thicker border? */
    /* The user image shows "S" selected? No, it's just "S" with an envelope. */
    /* Let's stick to a simple selected state: Black background, white text. */
    background-color: black;
    color: white;
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Size Selector",
  "settings": [
     {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Size Selector"
    }
  ]
}
{% endschema %}
